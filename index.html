<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>好管家股東紀念品代領</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-warning px-3">
    <a class="navbar-brand fw-bold" href="#">好管家紀念品代領</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto" id="nav-tabs">
        <!-- 分頁按鈕動態插入 -->
      </ul>
    </div>
  </nav>

  <div class="container mt-4">
    <div id="content-area"></div>
  </div>

  <script>
    const loginEmail = localStorage.getItem("loginEmail");
    const navTabs = document.getElementById("nav-tabs");
    const contentArea = document.getElementById("content-area");

    const tabsBeforeLogin = [
      { id: "souvenir", label: "紀念品" },
      { id: "recommend", label: "推薦清單" },
      { id: "notice", label: "注意事項" },
      { id: "about", label: "關於我" },
      { id: "register", label: "註冊" },
      { id: "login", label: "登入" }
    ];

    const tabsAfterLogin = [
      { id: "souvenir", label: "紀念品" },
      { id: "recommend", label: "推薦清單" },
      { id: "account", label: "新增帳號/持股" },
      { id: "delegation", label: "委託管理" },
      { id: "announcement", label: "公告欄" },
      { id: "manage", label: "紀念品管理" },
      { id: "billing", label: "帳戶管理" },
      { id: "shipping", label: "出貨" },
      { id: "logout", label: "登出" }
    ];

    const tabMap = loginEmail ? tabsAfterLogin : tabsBeforeLogin;

    tabMap.forEach(tab => {
      const li = document.createElement("li");
      li.className = "nav-item";
      li.innerHTML = `<a class="nav-link" href="#" data-id="${tab.id}">${tab.label}</a>`;
      navTabs.appendChild(li);
    });

    navTabs.addEventListener("click", async e => {
      if (e.target.matches(".nav-link")) {
        const id = e.target.dataset.id;
        if (id === "logout") {
          localStorage.removeItem("loginEmail");
          location.reload();
        } else {
          loadContent(id);
        }
      }
    });

    async function loadContent(id) {
      if (id === "souvenir") {
        const html = await fetch("souvenir.html").then(r => r.text());
        contentArea.innerHTML = html;
      } else if (id === "recommend") {
        const html = await fetch("recommend.html").then(r => r.text());
        contentArea.innerHTML = html;
      } else {
        contentArea.innerHTML = `<h4>${id} 頁面尚未定義</h4>`;
      }
    }

    // 預設顯示首頁 tab
    loadContent("souvenir");
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
